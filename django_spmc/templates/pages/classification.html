{% extends "base.html" %}
{% load static %}
{% load render_bundle from webpack_loader %}
{% block css %}
  {% render_bundle 'main_page' 'css' %}
  {{ block.super }} {# Here we want main_page.css to be loaded before base.css #}
{% endblock %}
{% block javascript %}
  <script>
    const tile_source = "{% get_media_prefix %}tiles/ea0ce40b-f2dc-4d6f-aa0e-537943905f51/{z}/{x}/{y}.png";
    const map_center = JSON.parse("[{{map_center.0}},{{ map_center.1 }}]");
    const user_id = {{ user_id }};
    const scene_id = {{ scene_id }};
    const algo_id = {{ algo_id }};
    const csrf_token = "{{ csrf_token }}"
  </script>
  <!-- Main page dependencies -->
  {% render_bundle 'main_page' 'js' attrs='defer' %}
{% endblock javascript %}
{% block content %}
  {# Check that project and scene were selected #}
  {% if not proj_id %}
    <p>You did not select a project yet. Please go to <a class="link" href="{% url 'home' %}">Projects</a> and select one</p>
  {% else %}
    {% if not scene_id %}
      <p>You did not select a scene yet. Please go to <a class="link" href="{% url 'scene' %}">Scene</a> and select one</p>
    {% else %}
      {# ============================================================================================================ #}
      {# ================================ Both scene and project were selectd, main part ============================ #}
      {# ============================================================================================================ #}
      <p>proj_id = {{ proj_id }}</p>
      <p>scene_id = {{ scene_id }}</p>

      <div id="map-sentinel-container">
        <div id="map-sentinel" style="width: 100%; height: 400px"></div>
      </div>
      <div id="map-sat-container">
        <div id="map-sat" style="width: 100%; height: 400px"></div>
      </div>
    {% endif %}
  {% endif %}

  {% block inline_javascript %}

  {% endblock inline_javascript %}
{% endblock %}
